<!DOCTYPE html> 
<html lang="en"> 
<head> 
<title>Merry Ecsmas</title> 
<meta content="We picked two snowflakes for you :)" name="description" />
<link href="//fonts.googleapis.com/css?family=Mountains+of+Christmas" rel="stylesheet" type="text/css" >
<link href="/css/ecsmas.css" rel="stylesheet" type="text/css" >
</head> 
<body> 
  
  <div id="header">
    <div id="card">
      It's that time of year again and we just wanted to send along a wish that you and yours have a very Merry Ecsmas.  In the spirit of Ecsmas
      we have put together a little gift for you written in our favorite ECMAScript, Javascript.  These snowflakes are generated from a precise 
      timestamp the moment you accessed this page.  In this way we've created a snowflake entirely unique to you.  You may ponder the significance of this 
      later.  For now enjoy each snowflake that you create.  We are grateful you have arrived here.  May this page brighten your day and bring you
      Ecsmas miracles in the year to come.  Merry Ecsmas everyone!
    </div>

    <div id="label">
      <h1>Merry Ecsmas</h1>
      <h3>To: You<br />From: <a href="http://twitter.com/jasonmoo">@jasonmoo</a> and <a href="http://twitter.com/darkgoyle">@darkgoyle</a></h3>
    </div>
  </div>

  
  <div id="wrapper">
    <canvas id="gift" width="500" height="500"></canvas>
    <canvas id="phlake" width="500" height="500"></canvas>
  </div>
  
  <div id="actions">
    <button>Create new snowflakes</button>
    <div id="flink">
      Send these flakes to a friend.  :) <input>
    </div>
    <div id="share">
      <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://ecsmas.com" data-text="Merry Ecsmas!  Here are 2 snowflakes for you.  :D" data-count="horizontal">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
      <a name="fb_share" class="facebook-share-button"></a><script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript"></script>
    </div>

  </div>
  
  <div id="footer">
    Merry Ecsmas Everyone! &bull; 2010 &bull; ecsmas.com
  </div>
</body>
<!--[if IE]><script src="/js/excanvas.js"></script><![endif]-->
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script type="text/javascript" src="/js/phlaky.js"></script>
<script type="text/javascript" src="/js/gift.js"></script>
<script>

function run_flake(key) {

  var t = +new Date;
  key = key ? key.replace('#','') : t.toString(36);
  window.location.hash = key;
  $('#flink input').val(window.location.href);
  window.snowflake(key);
  
  var n = (function(t){
   while (t > 1)
     t /= Math.exp(.5+Math.sqrt(5)/2,t);
   return t
  })(t % 215);
  
  var detail = 3;
  clearTimeout(run_flake.timeout);
  
  (function(){
    canvas.clear();
    canvas.flake(n);
    if (detail > 1) {
      canvas.flake(n/Math.PI*Phi);
      canvas.flake(n/Math.PI/Phi);
    }
    if (detail > 2){
      canvas.rotate(2e3);
      run_flake.timeout = setTimeout(arguments.callee, 30);
    }
  })();
  
}

$('#actions button').click(function(e) {
  run_flake();
  var myTracker = _gat._getTrackerByName();
  myTracker._trackEvent('snowflakey','create');
});
$('#flink input').click(function(e) {
  this.select();
})

$(function() {
  run_flake(window.location.hash);
});
</script>

<script>
var _gaq = [['_setAccount', 'UA-3011328-7'],['_trackPageview']];
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = 'http://www.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>


</html>

